pipeline {
  agent any

   stages {
    stage ("cloning code from repo")
    steps {
        checkout 
    }
   }  
   stage ("terraform initialization") {
    steps{
        sh ("terraform init -reconfigure")
    }
   }
   stage ("plan") {
    steps {
        sh ("terraform plan")

    }
   }
   stage ("terraform Action"){
    steps {
        echo "terraform action is ${action}"
        sh ("terraform ${action}"--auto-approve)
    }     
   }
}